---
import BasePage from '../../../components/BasePage.astro';
import BaseSettingBlock from '../../../components/BaseSettingBlock.astro';
import { languages } from '../../../i18n/ui';
import { useTranslations } from '../../../i18n/utils';
import '../../../styles/calculator.css';

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => {
    return { params: { lang } };
  });
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);
---

<BasePage
  title={t('calculator.title')}
  description={t('calculator.description')}
  activePage="calculator"
>
  <div class="layout">
    <div class="layout-block" style="flex: 1;">
      <div class="calculator-container">
        <div class="calculator">
          <div class="display">
            <div class="expression" id="expression"></div>
            <input
              type="text"
              class="result"
              id="result"
              placeholder={t('calculator.placeholder')}
              autocomplete="off"
            />
          </div>
          <div class="buttons">
            <button class="btn-calc btn-func" data-action="clear-all">AC</button>
            <button class="btn-calc btn-func" data-action="clear">C</button>
            <button class="btn-calc btn-func" data-action="backspace">‚å´</button>
            <button class="btn-calc btn-op" data-value="/">√∑</button>

            <button class="btn-calc" data-value="7">7</button>
            <button class="btn-calc" data-value="8">8</button>
            <button class="btn-calc" data-value="9">9</button>
            <button class="btn-calc btn-op" data-value="*">√ó</button>

            <button class="btn-calc" data-value="4">4</button>
            <button class="btn-calc" data-value="5">5</button>
            <button class="btn-calc" data-value="6">6</button>
            <button class="btn-calc btn-op" data-value="-">‚àí</button>

            <button class="btn-calc" data-value="1">1</button>
            <button class="btn-calc" data-value="2">2</button>
            <button class="btn-calc" data-value="3">3</button>
            <button class="btn-calc btn-op" data-value="+">+</button>

            <button class="btn-calc" data-value="00">00</button>
            <button class="btn-calc" data-value="0">0</button>
            <button class="btn-calc" data-value=".">.</button>
            <button class="btn-calc btn-equals" data-action="calculate">=</button>
          </div>
        </div>
        <div class="history-panel">
          <div class="history-header">
            <span>{t('calculator.history')}</span>
            <button class="btn-clear-history" id="clear-history" title={t('calculator.clear_history')}>üóëÔ∏è</button>
          </div>
          <div class="history-list" id="history-list"></div>
        </div>
      </div>
    </div>
    <BaseSettingBlock title={t('settings')}>
      <div class="setting">
        <label class="switcher">
          <input type="checkbox" id="sound-enabled" checked />
          <div class="toggle"></div>
          <span>{t('calculator.sound')}</span>
        </label>
      </div>
      <div class="setting">
        <label class="switcher">
          <input type="checkbox" id="vibration-enabled" checked />
          <div class="toggle"></div>
          <span>{t('calculator.vibration')}</span>
        </label>
      </div>
    </BaseSettingBlock>
  </div>

  <script>
    import { initCalculator } from '../../../scripts/calculator';
    initCalculator();
  </script>
</BasePage>
