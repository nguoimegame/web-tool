---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Sidebar from '../../components/Sidebar.astro';
import PageHeader from '../../components/PageHeader.astro';
import InputFileBlock from '../../components/InputFileBlock.astro';
import OutputBlock from '../../components/OutputBlock.astro';
import SettingBlock from '../../components/SettingBlock.astro';

const title = "Decode Hex to File";
const description = "Decode Hex to file. Free online Hex decoding tool.";
const toolName = "FileDecode";
const jsFile = "hex.js?v=3";
const activePage = "encoding/hex_decode_file";
---

<BaseLayout title={title} description={description}>
    <div id="app">
        <Sidebar activePage={activePage} />
        
        <div id="content">
            <div class="top-nav">
                <button id="sidebar-toggler" aria-controls="sidebar" aria-expanded="false" aria-label="Menu">
                    <img src="/images/menu.svg" width="24" height="24" alt="Menu">
                </button>
            </div>
            
            <PageHeader title={title} description={description} />
            
            <main>
                <div class="layout">
                    <div class="layout-block">
                        <InputFileBlock
                            title="Input"
                            urlPlaceholder="Enter here..."
                            dropText="Drag and drop the file here or click to select a file. It will process locally and won't be uploaded."
                            dataRemember="input"
                            dataShare="input"
                            dataAutoUpdate={true}
                        />
                        
                        <OutputBlock 
                            title="Output"
                            placeholder="Output here..."
                            dataEncodingFrom="#output-type"
                            isReadonly={true}
                            showDownload={true}
                            showCopy={false}
                            showShareLink={false}
                            showDownload={true}
                        />
                    </div>
                    
                    <SettingBlock executeLabel="Decode">
                        <div class="setting">
                            <label for="file-type">Input Type</label>
                            <select id="file-type" data-remember="file-type" data-auto-update>
                                <option value="text">Encoded Text</option>
                                <option value="file">Encoded File</option>
                            </select>
                        </div>
                        
                        <div class="setting">
                            <label for="download-file-name">File Name</label>
                            <input type="text" id="download-file-name" data-remember="download-file-name" value="download.txt" placeholder="Download File Name">
                        </div>
                    </SettingBlock>
                </div>
            </main>
        </div>
    </div>
    
    <script is:inline set:html={`
        ++waitLoadCount;
        delayScripts.push({
            src: '/js/${jsFile}',
            onload: function () {
                window.method = download;
                methodLoad();
            }
        });
        ++waitLoadCount;
        delayScripts.push({
            src: '/js/encoding.js?v=8',
            onload: function () {
                methodLoad();
            }
        });
        ++waitLoadCount;
        delayScripts.push({
            src: '/js/url-blob.js?v=1',
            onload: function () {
                methodLoad();
            }
        });
        ++waitLoadCount;
        delayScripts.push({
            src: '/js/droppable-file.js',
            onload: function () {
                methodLoad();
            }
        });
        ++waitLoadCount;
        delayScripts.push({
            src: '/js/file.js?v=10',
            onload: function () {
                methodLoad();
            }
        });
        window.PROCESSING_MESSAGE = 'decoding...';
    `}></script>
</BaseLayout>
