---
import BaseHashPage from "../../components/BaseHashPage.astro";
import InputEncodingSelect from "../../components/InputEncodingSelect.astro";
import OutputEncodingSelect from "../../components/OutputEncodingSelect.astro";
import { useTranslations } from '../../i18n/utils';

const t = useTranslations('en');
const title = t('shake128.title');
const description = t('shake128.description');
const activePage = "hash/shake128";
---

<BaseHashPage title={title} description={description} activePage={activePage}>
  <div class="setting">
    <label for="input-type">{t('input_encoding')}</label>
    <InputEncodingSelect id="input-type" dataShare="input_type" dataAutoUpdate={true} />
  </div>
  <div class="setting">
    <label for="output-type">{t('output_encoding')}</label>
    <OutputEncodingSelect id="output-type" dataShare="output_type" dataAutoUpdate={true} />
  </div>
  <div class="setting">
    <label for="bits">{t('bits')}</label>
    <input type="number" id="bits" data-option="bits" data-remember="bits-256" data-share="bits" value="256" step="8" min="8" />
  </div>

  <script is:inline>
    ++waitLoadCount;
    delayScripts.push({
      src: "https://cdnjs.cloudflare.com/ajax/libs/js-sha3/0.9.3/sha3.min.js",
      onload: function () {
        window.method = withOptions(shake_128, ["bits"]);
        methodLoad();
      },
    });
  </script>

  <script is:inline>
    // Encoding script already increments waitLoadCount internally
    delayScripts.push({
      src: "/js/encoding.js?v=8",
    });
  </script>
</BaseHashPage>
