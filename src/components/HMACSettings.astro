---
import InputEncodingSelect from "./InputEncodingSelect.astro";
import { useTranslations } from '../i18n/utils';

const { lang = 'en' } = Astro.params;
const t = useTranslations(lang as any);
---

<div class="setting">
  <label class="switcher">
    <input type="checkbox" value="1" id="hmac-enabled" data-remember="hmac-enabled" data-share="hmac_enabled" data-auto-update />
    <div class="toggle"></div>
    <span>{t('enable_hmac')}</span>
  </label>
</div>
<details class="setting-group" id="hmac" style="display:none" open>
  <summary>HMAC</summary>
  <div class="setting">
    <label for="hmac-input-type">{t('encoding')}</label>
    <InputEncodingSelect id="hmac-input-type" dataRemember="hmac-input-type" dataShare="hmac_input_type" dataAutoUpdate={true} includeTextEncodings={true} />
  </div>
  <div class="setting">
    <label for="hmac-key">{t('hmac_key')}</label>
    <input type="text" id="hmac-key" data-remember="hmac-key" data-share="hmac_key" data-encoding-from="#hmac-input-type" data-auto-update />
  </div>
</details>
<script is:inline>
  ++waitLoadCount;
  delayScripts.push({
    src: "/js/hmac.js?v=2",
  });
</script>
